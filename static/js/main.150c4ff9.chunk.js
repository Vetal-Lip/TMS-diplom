(this["webpackJsonpdiplom-movies-refactoring"]=this["webpackJsonpdiplom-movies-refactoring"]||[]).push([[0],{25:function(e,t,a){e.exports=a(37)},30:function(e,t,a){},31:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(11),c=a.n(o),l=(a(30),a(31),a(6)),s=a(4),i=a.n(s),u=function(e){return{type:"ITEMS_FETCH_DATA_LOADING",payload:e}},d=function(e){return{type:"MOVIE_FETCH_DATA_LOADING",payload:e}},_=function(e){return{type:"GET_COUNT_MOVIES",payload:e}};var m=Object(l.b)((function(e){return{state:e.moviesReducer.data,inputValue:e.FormReducer.inputValue,searchBy:e.FormReducer.searchBy,loading:e.FormReducer.loading,sortBy:e.FormReducer.sortBy,countMovies:e.FormReducer.countMovies,hasErrored:e.moviesReducer.hasErrored}}),(function(e){return{onChange:function(t){return e({type:"GET_INPUT_FIELD_VALUE",payload:t})},getFetchMovies:function(t){return e(function(e){return function(t){t(u(!0)),fetch(e).then((function(e){if(!e.ok)throw new Error(e.statusText);return t(u(!1)),e})).then((function(e){return e.json()})).then((function(e){return t({type:"ITEMS_FETCH_DATA_SUCCESS",payload:e})})).catch((function(e){return t({type:"ITEMS_FETCH_DATA_ERRORED",payload:"ERROR: "+e.name+" "+e.message})}))}}(t))},getSearchValue:function(){return e({type:"ON_CLICK_SEARCH_BUTTON"})},getSearchBy:function(t){return e({type:"GET_SEARCH_BY",payload:t})},onClickReleaseDate:function(t){return e({type:"GET_SORT_BY_DATE",payload:t})},onClickRaiting:function(t){return e({type:"GET_SORT_BY_RATING",payload:t})}}}))((function(e){var t=function(t){return e.getSearchBy(t.currentTarget.getAttribute("id"))};return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},n.a.createElement("input",{className:i.a.input,value:e.inputValue,onChange:function(t){return e.onChange(t.target.value)},placeholder:"title"===e.searchBy?"enter film name":"enter jenre name"}),n.a.createElement("div",{className:i.a.search_wrapper},n.a.createElement("div",{className:i.a.searchby_wrapper},n.a.createElement("p",{className:i.a.searchby_title},"search by"),n.a.createElement("div",{id:"title",onClick:t,className:i.a.searchby_item,style:{background:"".concat("title"===e.searchBy?"rgb(221, 4, 4)":"")}},"title"),n.a.createElement("div",{id:"genre",onClick:t,className:i.a.searchby_item,style:{background:"".concat("genre"===e.searchBy?"rgb(221, 4, 4)":"")}},"genre")),n.a.createElement("div",null,n.a.createElement("button",{className:i.a.button,onClick:function(){e.getSearchValue(),e.getFetchMovies("https://reactjs-cdp.herokuapp.com/movies")},disabled:e.inputValue?"":"disabled"},e.loading?"Loading...":"Search")))),n.a.createElement("div",{className:i.a.wrapper},n.a.createElement("div",null,n.a.createElement("span",{style:{fontWeight:"bold"}},e.countMovies)," movies found"),n.a.createElement("div",{className:i.a.sortby_wrapper},n.a.createElement("div",{className:i.a.sortby},"sort by:"),n.a.createElement("div",{id:"date",className:i.a.sortby_item,onClick:function(t){return e.onClickReleaseDate(t.currentTarget.getAttribute("id"))},style:{color:"".concat("date"===e.sortBy?"rgb(221, 4, 4)":" ")}},"release date"),n.a.createElement("div",{id:"rating",className:i.a.sortby_item,onClick:function(t){return e.onClickRaiting(t.currentTarget.getAttribute("id"))},style:{color:"".concat("rating"===e.sortBy?"rgb(221, 4, 4)":" ")}},"rating"))))})),p=a(24),E=a(9),y=a.n(E);var v=Object(l.b)((function(e){return{state:e.moviesReducer.data.data,searchValue:e.FormReducer.searchValue,searchBy:e.FormReducer.searchBy,sortBy:e.FormReducer.sortBy}}),(function(e){return{openModal:function(){return e({type:"OPEN_MODAL"})},getMovieInfo:function(t){return e(function(e){return function(t){t(d(!0)),fetch("https://reactjs-cdp.herokuapp.com/movies/"+e).then((function(e){if(!e.ok)throw new Error(e.statusText);return t(d(!1)),e})).then((function(e){return e.json()})).then((function(e){return t({type:"MOVIE_FETCH_DATA_SUCCESS",payload:e})})).catch((function(){return t({type:"MOVIE_FETCH_DATA_ERRORED"})}))}}(t))},getCountMovies:function(t){return e(_(t))}}}))((function(e){var t=[],a=[];e.state&&(t=e.state.filter((function(t){return"title"===e.searchBy?t.title&&t.title.toLowerCase().includes(e.searchValue.toLowerCase()):"genre"===e.searchBy?t.genres&&t.genres.some((function(t){return t.toLowerCase().includes(e.searchValue.toLowerCase())})):void 0})));var o=t.length,c=Object(l.c)();Object(r.useEffect)((function(){c(_(o))})),a=Object(p.a)(t).sort((function(t,a){return"rating"===e.sortBy?a.vote_average>t.vote_average?1:-1:"date"===e.sortBy?a.release_date>t.release_date?1:-1:void 0}));var s=function(t){var a=t.currentTarget.getAttribute("id");e.openModal(),e.getMovieInfo(a)};return e.state?a.map((function(e,t){return n.a.createElement("div",{key:e.id,id:"".concat(e.id),className:y.a.card_wrapper,onClick:s},n.a.createElement("div",{className:y.a.card_item},n.a.createElement("img",{className:y.a.img_card,src:e.poster_path,alt:"Movies"})),n.a.createElement("div",{className:y.a.content_wrapper},n.a.createElement("div",null,n.a.createElement("div",null,e.title),n.a.createElement("div",null,e.genres.join(" & "))),n.a.createElement("div",{className:y.a.date},e.release_date.split("-",1))))})):null})),h=a(5),f=a.n(h);var g=Object(l.b)((function(e){return{isOpen:e.ModalReducer.isOpen,movieInfo:e.cardReducer.movieInfo}}),(function(e){return{closeModal:function(){return e({type:"CLOSE_MODAL"})}}}))((function(e){return!0===e.isOpen?n.a.createElement("div",{className:"vmodal"},n.a.createElement("div",{className:f.a.modal_overlay},n.a.createElement("div",{className:f.a.modal_window},n.a.createElement("div",{style:{backgroundImage:"url(".concat(e.movieInfo.poster_path,")"),width:"90%",height:"90%",margin:"0 auto"}},n.a.createElement("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",width:"100%",height:"100%"}},n.a.createElement("div",{className:f.a.modal_header},n.a.createElement("span",{className:f.a.modal_title},e.movieInfo.title),n.a.createElement("span",{className:f.a.modal_close,onClick:e.closeModal},"\xd7")),n.a.createElement("div",{className:f.a.modal_body},n.a.createElement("span",{className:f.a.modal_genre},e.movieInfo.genres),n.a.createElement("div",{className:f.a.modal_description},e.movieInfo.overview),n.a.createElement("div",{className:f.a.modal_popularity},"popularity: ",e.movieInfo.revenue),n.a.createElement("div",{className:f.a.modal_budget},"budget: ",e.movieInfo.budget)),n.a.createElement("div",{className:f.a.modal_footer})))))):null}));var b=Object(l.b)((function(e){return{hasErrored:e.moviesReducer.hasErrored}}),(function(e){return{}}))((function(e){return console.log(e.hasErrored),e.hasErrored?n.a.createElement("div",{className:"error-container"},e.hasErrored):n.a.createElement(r.Fragment,null,n.a.createElement(g,null),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"container-bg"},n.a.createElement("div",{className:"container-wrapper "},n.a.createElement("h1",{className:"form-title"},"find you movie"),n.a.createElement(m,null))),n.a.createElement("div",{className:"card-wrapper"},n.a.createElement(v,null)),n.a.createElement("div",{className:"footer"},n.a.createElement("p",{className:"footer_content"},"\xa9 Lipnitski Vitali"))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=a(23),T=a(7),C=a(2),N={inputValue:"",searchValue:"",searchBy:"title",sortBy:" ",countMovies:0};var w={data:{},loading:!1,hasErrored:void 0};var A={isOpen:!1};var R={movieInfo:{},loading:!1};var I=a(20),S=a(21),M=Object(I.composeWithDevTools)(Object(T.applyMiddleware)(S.a)),B=Object(T.combineReducers)({FormReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_INPUT_FIELD_VALUE":return Object(C.a)({},e,{inputValue:t.payload});case"ON_CLICK_SEARCH_BUTTON":return Object(C.a)({},e,{inputValue:"",searchValue:e.inputValue});case"GET_SEARCH_BY":return Object(C.a)({},e,{searchBy:t.payload});case"GET_SORT_BY_DATE":case"GET_SORT_BY_RATING":return Object(C.a)({},e,{sortBy:t.payload});case"GET_COUNT_MOVIES":return Object(C.a)({},e,{countMovies:t.payload});default:return e}},moviesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_FETCH_DATA_LOADING":return Object(C.a)({},e,{loading:t.payload});case"ITEMS_FETCH_DATA_SUCCESS":return Object(C.a)({},e,{data:Object(C.a)({},e.data,{},t.payload)});case"ITEMS_FETCH_DATA_ERRORED":return Object(C.a)({},e,{hasErrored:t.payload});default:return e}},ModalReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_MODAL":return{isOpen:!0};case"CLOSE_MODAL":return{isOpen:!1};default:return e}},cardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIE_FETCH_DATA_LOADING":return Object(C.a)({},e,{loading:t.payload});case"MOVIE_FETCH_DATA_SUCCESS":return Object(C.a)({},e,{movieInfo:Object(C.a)({},e.movieInfo,{},t.payload)});case"MOVIE_FETCH_DATA_ERRORED":return Object(C.a)({},e);default:return e}}}),D=Object(T.createStore)(B,M);c.a.render(n.a.createElement(O.a,null,n.a.createElement(l.a,{store:D},n.a.createElement(b,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},4:function(e,t,a){e.exports={search_wrapper:"styles_search_wrapper__Rsc64",searchby_wrapper:"styles_searchby_wrapper__2Aktt",searchby_item:"styles_searchby_item__2Yebk",searchby_title:"styles_searchby_title__1C4Gf",button:"styles_button__D6zJr",wrapper:"styles_wrapper__3yVul",sortby_wrapper:"styles_sortby_wrapper__3IsrY",sortby:"styles_sortby__3e6md",sortby_item:"styles_sortby_item__1HcQO"}},5:function(e,t,a){e.exports={modal_overlay:"styles_modal_overlay__2xNth",modal_window:"styles_modal_window__3KSsG",modal_header:"styles_modal_header__2Snqd",modal_body:"styles_modal_body__23beo",modal_title:"styles_modal_title__145BL",modal_close:"styles_modal_close__3WBFA",modal_description:"styles_modal_description__pa4nf",modal_popularity:"styles_modal_popularity__2CpuP",modal_budget:"styles_modal_budget__YEpaE"}},9:function(e,t,a){e.exports={card_wrapper:"styles_card_wrapper__2u7kx",img_card:"styles_img_card__2mc0f",content_wrapper:"styles_content_wrapper__32nGA",date:"styles_date__VCEoF"}}},[[25,1,2]]]);
//# sourceMappingURL=main.150c4ff9.chunk.js.map